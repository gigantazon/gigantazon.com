{% extends "ideas/base.html" %}
{% load static %}

{% block main %}


<div class="row">
 <div class="col-md-5 col-md-offset-1">
  <button type="button" class="btn btn-default" data-toggle="modal" data-target="#ideaModal">Add Idea</button><br />
 	<h3>Top Ideas</h3>
  <ul class="list-unstyled">
{% for drop in drop_parents %}
	 <li class="default "><a href="view/{{ drop.id }}">{{ drop.data|title|truncatechars:100 }}</li></a>
{% endfor %}

{% if drop_parents.has_next %}
  <a href="?page={{ drop_parents.next_page_number }}"><span class="label label-info">Next<span></a>
{% endif %}
{% if drop_parents.has_previous %} 
  <a href="?page={{ drop_parents.previous_page_number }}"><span class="label label-info">Prev</span></a>
{% endif %}

  </ul>
 </div>
 <div class="col-md-4 col-md-offset-1">
  <div class="row">
    <div class="col-md-12" role="tabpanel">
      <ul class="nav nav2 nav-tabs" role="tablist">
        <li  class="active" role="presentation" ><a aria-controls="latest" data-toggle="tab"href="#latest">Latest</a></li>
        <li role="presentation" ><a aria-controls="watch" data-toggle="tab" href="#watch">Watching</a></li>
        <li role="presentation" ><a aria-controls="mine" data-toggle="tab" href="#mine">My Ideas</a></li>
      </ul>
      <div class="tab-content">
        <div role="tabpanel1" class="tab-pane active" id="latest">
          <ul class="list-unstyled">
            {% for r in latest %}
           {% if r.drop_type == 'spark' %}
             <li class="default spark">{% if r.url %}<a href="{{ r.url }}">{% endif %}{{ r.data|truncatechars:100}}</a></p></li>
            {% elif r.drop_type == 'idea' %}
    	       <li class="default idea"><a href="view/{{ r.url }}">{{ r.data|truncatechars:100 }}</a></p></li>
            {% elif r.drop_type == 'action' %}
    	       <li class="default action"><a href="view/{{ r.idea_id }}">{{ r.data|truncatechars:100 }}</a></p></li>
            {% else %}
    	       {{ pass }}
            {% endif %}
           {% endfor %}
          </ul>
        </div>
        <div role="tabpanel1" class="tab-pane" id="watch">
          {% if user.is_authenticated %}
           You're watching:
          {% else %}
            You must be logged in
          {% endif %}
        </div>
        <div role="tabpanel1" class="tab-pane" id="mine">
          {% if user.is_authenticated %}
           <ul class="list-unstyled">
           {% for m in mine %}
             <li>{{ m.data|truncatechars:70 }}</li>
           {% endfor %}
           </ul>
          {% else %}
            You must be logged in
          {% endif %}
        </div>          
      </div>
    </div>
  </div>
 </div>
</div>

<div class="modal fade" id="ideaModal" tabindex="-1" role="dialog" aria-labelledby="ideaModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="ideaModalLabel">Add New Idea</h4>
      </div>
      <div class="modal-body">
        <form class="form" id="add_idea" method="post" action="/ideas/">
          {% csrf_token %}
          <div class="form-group">
            <textarea clas="form-control" rows="3" name="data" id="textIdea" placeholder="Add your idea" style="max-width: 80%; width: 80%"> </textarea>
          </div>
          <button type="submit" class="btn btn-default">Submit</button>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
