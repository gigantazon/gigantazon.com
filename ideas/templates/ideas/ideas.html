{% extends "ideas/nav.html" %}
{% load static %}

{% block main %}
<script>
$(document).ready(function () {
  var loc = document.URL.indexOf('mypage')
  if (document.URL.indexOf('mypage') != -1 ) {
    $('a[href=#mine]').tab('show') 
  } else if (document.URL.indexOf('watchpage') != -1 ) {
    $('a[href=#watch]').tab('show') 
  } else {
    $('a[href=#latest]').tab('show') 
  }

$("li.top-ideas").each(function() {
  var ideaid = $(this).attr("id");
  var url = "/ideas/view/subs/"+ideaid
    $.ajax({
      type: "GET",
      url: url,
      success: function(data)
      {
        $("span."+ideaid).html("Replies: "+data.length)
        
      }
    })

  })
})
</script>
<script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>

<div class="uk-container uk-container-center uk-margin-top">
 <div class="uk-width-medium-1-1">
  <button class="uk-button" data-uk-modal="{target: '#ideaModal'}" >Add Idea</button><br />
 	<h3>Top Ideas</h3>
 </div>
</div>

<div class="uk-container uk-container-center">
  <div class="uk-grid-small-1-2 uk-grid-width-medium-1-3" data-uk-grid="{gutter: 20}">
  {% for drop in drop_parents %}
    <div class="uk-panel uk-panel-box" style="min-height: 195px; border-color: {{ drop.category.color }}; margin: 5px">
     <a href="view/{{ drop.id }}" class="default"><h4 class="uk-panel-title">{{ drop.data }}</h4></a>
     {{ drop.category}}
    <p class="top">Submitted {{ drop.date|timesince}} ago<br />
    Views: {{ drop.views }} - Replies: {{ drop.replies }} - URL: <a href="http://gzon.co/{{drop.short}}">gzon.co/{{ drop.short }}</a>
    </div>
  {% endfor %}
 </div>
</div>

{% if drop_parents.has_previous %} 
  <a href="?page={{ drop_parents.previous_page_number }}"><span class="label label-info">Prev</span></a>
{% endif %}
{% if drop_parents.has_next %}
  <a href="?page={{ drop_parents.next_page_number }}"><span class="label label-info">Next<span></a>
{% endif %}




<script>
  function countChar(val) {
      var len = val.value.length;
      if (len >= 250) {
       val.value = val.value.substring(0, 250);
       } else {
         $('#charNum').text(250 - len);
       }
   };
</script>
{% endblock %}
